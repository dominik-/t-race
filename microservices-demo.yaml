services:
  - id: frontend-browse
    envRef: env01
    sinkRef: agent1
    units:
      - work: short1
        svc: ad
      - svc: product-catalog
      - svc: recommendation
    context:
      tags:
        - keyLength: 20
          valueLength: 40
        - keyStatic: method
          valueLength: 60
      baggage:
        - keyLength: 10
          valueLength: 30
  - id: frontend-cart
    envRef: env01
    sinkRef: agent1
    context:
      tags:
        - keyLength: 20
          valueLength: 40
        - keyStatic: method
          valueLength: 60
    units:
      - work: short1
        svc: ad
      - svc: cart
      - svc: recommendation
      - svc: product-catalog
  - id: frontend-order
    envRef: env01
    sinkRef: agent1
    context:
      tags:
        - keyLength: 20
          valueLength: 40
        - keyStatic: method
          valueLength: 60
    units:
      - work: short1
        svc: ad
      - svc: checkout
  - id: checkout
    envRef: env01
    sinkRef: agent1
    units:
      - work: short1
        svc: cart
      - work: none
        svc: product-catalog
      - work: none
        svc: currency
      - work: none
        svc: payment
      - work: none
        svc: shipping
      - svc: email
  - id: ad
    envRef: env01
    sinkRef: agent1
    units:
      - work: constant1
  - id: currency
    envRef: env01
    sinkRef: agent1
    units:
      - work: constant1
  - id: payment
    envRef: env01
    sinkRef: agent1
    units:
      - work: constant1
  - id: shipping
    envRef: env01
    sinkRef: agent1
    units:
      - work: constant1
  - id: email
    envRef: env01
    sinkRef: agent1
    units:
      - work: constant1
  - id: product-catalog
    envRef: env01
    sinkRef: agent1
    units:
      - work: constant1
  - id: recommendation
    envRef: env01
    sinkRef: agent1
    units:
      - work: short1
        svc: product-catalog
  - id: cart
    envRef: env01
    sinkRef: agent1
    units:
      - work: cache-lookup

sinks:
  - id: agent1
    type: provided
    hostport: localhost:6831
    envRef: env01
workUnits:
  - id: short1
    type: gaussian
    params:
      mean: 2000
      stddev: 200
  - id: constant1
    type: constant
    params:
      value: 10000
  - id: cache-lookup
    type: exponential
    params:
      mean: 1000
      lambda: 2
  - id: none
    type: none
